/* Copyright 2023 splitkb.com <support@splitkb.com>
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 2 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */

#include QMK_KEYBOARD_H

enum layers {
    _BASE = 0,
    _LAYER_1,
    _LAYER_2,
    _LAYER_3,
};

// Aliases for readability
#define BASE   DF(_BASE)
#define LAYER_1  DF(_LAYER_1)
#define LAYER_2  DF(_LAYER_2)
#define LAYER_3  DF(_LAYER_3)

#define CTL_ESC  MT(MOD_LCTL, KC_ESC)
#define CTL_QUOT MT(MOD_RCTL, KC_QUOTE)
#define CTL_MINS MT(MOD_RCTL, KC_MINUS)
#define ALT_ENT  MT(MOD_LALT, KC_ENT)
#define ALT_SPC  LALT_T(KC_SPC)

#define UNDO  LCTL(KC_Z)
#define CUT   LCTL(KC_X)
#define COPY  LCTL(KC_C)
#define PASTE LCTL(KC_V)

// ChromeOS Screenshot.
#define SCREENS LSFT(LCTL(LGUI(KC_F5)))
// ChromeOS Windows picker.
#define WDOWS   LGUI(KC_F5)
// ChromeOS Lock.
#define LOCK    LGUI(KC_L)
// ChromeOS Switch user.
#define SWITCH LCA(KC_DOT)

// Note: LAlt/Enter (ALT_ENT) is not the same thing as the keyboard shortcut Alt+Enter.
// The notation `mod/tap` denotes a key that activates the modifier `mod` when held down, and
// produces the key `tap` when tapped (i.e. pressed and released).

// clang-format off
const uint16_t PROGMEM keymaps[][MATRIX_ROWS][MATRIX_COLS] = {
/*
 * Base Layer: BASE
 *
 * ,-------------------------------------------.      ,------.  ,------.      ,-------------------------------------------.
 * | ` ~    |   1  |   2  |   3  |   4  |   5  |      |      |  |      |      |   6  |   7  |   8  |   9  |   0  |  Esc   |
 * |--------+------+------+------+------+------|      |------|  |------|      |------+------+------+------+------+--------|
 * |  Tab   |   Q  |   W  |   E  |   R  |   T  |      |      |  |      |      |   Y  |   U  |   I  |   O  |   P  |  Bksp  |
 * |--------+------+------+------+------+------|      |------|  |------|      |------+------+------+------+------+--------|
 * |Ctrl/Esc|   A  |   S  |   D  |   F  |   G  |      |      |  |      |      |   H  |   J  |   K  |   L  | ;  : |  ' "   |
 * |--------+------+------+------+------+------+------+------|  |------|------+------+------+------+------+------+--------|
 * | LShift |   Z  |   X  |   C  |   V  |   B  | - _  | ({[  |  |  ]}) |  = + |   N  |   M  | ,  < | . >  | /  ? | RShift |
 * `----------------------+------+------+------+------+------|  |------+------+------+------+------+----------------------'
 *                        | LGUI | LCTL | MO(1)| Alt/ | Pause|  | RCTL | Enter| MO(2)| AltGr| RGUI |
 *                        |      |      |      |  Spc |      |  |      |      |      |      |      |
 *                        `----------------------------------'  `----------------------------------'
 *
 * ,----------------------------.      ,------.                 ,----------------------------.      ,------.
 * | Prev | Next | Pause | Stop |      | Mute |                 | Prev | Next | Pause | Stop |      | Mute |
 * `----------------------------'      `------'                 `----------------------------'      '------'
 */
    [_BASE] = LAYOUT_myr(
      KC_GRV  , KC_1 ,  KC_2   ,  KC_3  ,   KC_4 ,   KC_5 ,         _______,     _______,          KC_6 ,  KC_7 ,  KC_8 ,   KC_9 ,  KC_0 , KC_GRV,
      KC_ESC  , KC_Q ,  KC_W   ,  KC_E  ,   KC_R ,   KC_T ,         _______,     _______,          KC_Y ,  KC_U ,  KC_I ,   KC_O ,  KC_P , KC_BSPC,
      KC_TAB  , KC_A ,  KC_S   ,  KC_D  ,   KC_F ,   KC_G ,         _______,     _______,          KC_H ,  KC_J ,  KC_K ,   KC_L ,KC_SCLN,KC_QUOT,
      KC_LSFT , KC_Z ,  KC_X   ,  KC_C  ,   KC_V ,   KC_B , KC_MINS,TODO,     TODO  , KC_EQL, 	   KC_N ,  KC_M ,KC_COMM, KC_DOT ,KC_SLSH, KC_RSFT,
                                 KC_LGUI , KC_LCTL, MO(1) , ALT_SPC , KC_MPLY   ,     KC_RCTL    , KC_ENT ,MO(2), TODO, KC_RGUI,

      _______, _______, _______, _______,    _______,                            _______, _______, _______, _______,    _______
    ),

/*
 * Layer 1
 *
 * ,-------------------------------------------.      ,------.  ,------.      ,-------------------------------------------.
 * | TRNS   |   1  |   2  |   3  |   4  |   5  |      |      |  |      |      |   6  |   7  |   8  |   9  |   0  |  TRNS  |
 * |--------+------+------+------+------+------|      |------|  |------|      |------+------+------+------+------+--------|
 * | TRNS   |   1  |   2  |   3  |   4  |   5  |      |      |  |      |      |   6  |   7  |   8  |   9  |   0  |  TRNS  |
 * |--------+------+------+------+------+------|      |------|  |------|      |------+------+------+------+------+--------|
 * | TRNS   |      |      |      |      |      |      |      |  |      |      |   ←  |   ↓  |  ↑   |   →  |      |  TRNS  |
 * |--------+------+------+------+------+------+------+------|  |------|------+------+------+------+------+------+--------|
 * | TRNS   | UNDO |  CUT | COPY | PASTE|      | TRNS | TRNS |  | TRNS |      |      |      |      |      |      |  TRNS  |
 * `----------------------+------+------+------+------+------|  |------+------+------+------+------+----------------------'
 *                        | TRNS | TRNS | TRNS | TRNS | TRNS |  | TRNS | TRNS |MO(3) | TRNS | TRNS |
 *                        |      |      |      |      |      |  |      |      |      |      |      |
 *                        `----------------------------------'  `----------------------------------'
 *
 * ,----------------------------.      ,------.                 ,----------------------------.      ,------.
 * | Prev | Next | Pause | Stop |      | Mute |                 | Prev | Next | Pause | Stop |      | Mute |
 * `----------------------------'      `------'                 `----------------------------'      '------'
 */
    [_LAYER_1] = LAYOUT_myr(
      KC_TRNS , KC_1 ,  KC_2   ,  KC_3  ,   KC_4 ,   KC_5 ,         _______,     _______,          KC_6 ,  KC_7 ,  KC_8 ,   KC_9 ,  KC_0 , KC_TRNS,
      KC_TRNS , KC_1 ,  KC_2   ,  KC_3  ,   KC_4 ,   KC_5 ,         _______,     _______,          KC_6 ,  KC_7 ,  KC_8 ,   KC_9 ,  KC_0 , KC_TRNS,
      KC_TRNS ,_______,_______ ,_______ , _______,_______ ,         _______,     _______,        KC_LEFT,KC_DOWN, KC_UP ,KC_RGHT ,_______,KC_TRNS,
      KC_TRNS , UNDO ,  CUT    ,  COPY  ,  PASTE ,_______, KC_TRNS,KC_TRNS,     KC_TRNS, KC_TRNS,_______,_______,_______,_______ ,_______, KC_TRNS,
                                 KC_TRNS, KC_TRNS,KC_TRNS, KC_TRNS,KC_TRNS,     KC_TRNS       , KC_TRNS ,MO(3),KC_TRNS, KC_TRNS,

      _______, _______, _______, _______,    _______,                            _______, _______, _______, _______,    _______
    ),


/*
 * Layer 2
 *
 * ,-------------------------------------------.      ,------.  ,------.      ,-------------------------------------------.
 * | TRNS   |  F1  |  F2  |  F3  |  F4  |  F5  |      |      |  |      |      |  F6  |  F7  |  F8  |  F9  | F10  |  F11   |
 * |--------+------+------+------+------+------|      |------|  |------|      |------+------+------+------+------+--------|
 * | TRNS   |   !  |   @  |   #  |   $  |   %  |      |      |  |      |      |   ^  |   &  |   *  |   +  |   |  |  F12   |
 * |--------+------+------+------+------+------|      |------|  |------|      |------+------+------+------+------+--------|
 * | TRNS   |      |      |      |      |      |      |      |  |      |      |   (  |   )  | - _  |   {  |   }  |  ` ~   |
 * |--------+------+------+------+------+------+------+------|  |------|------+------+------+------+------+------+--------|
 * | TRNS   |      |      |      |      |      | TRNS | TRNS |  | TRNS | TRNS | [ {  | } ]  | = +  |      | \ |  |  TRNS  |
 * `----------------------+------+------+------+------+------|  |------+------+------+------+------+----------------------'
 *                        | TRNS | TRNS | MO(3)| TRNS | TRNS |  | TRNS | TRNS | TRNS | TRNS | TRNS |
 *                        |      |      |      |      |      |  |      |      |      |      |      |
 *                        `----------------------------------'  `----------------------------------'
 *
 * ,----------------------------.      ,------.                 ,----------------------------.      ,------.
 * | Prev | Next | Pause | Stop |      | Mute |                 | Prev | Next | Pause | Stop |      | Mute |
 * `----------------------------'      `------'                 `----------------------------'      '------'
 */
    [_LAYER_2] = LAYOUT_myr(
      KC_TRNS , KC_F1,  KC_F2  ,  KC_F3 ,   KC_F4,   KC_F5,         _______,     _______,          KC_F6,  KC_F7,  KC_F8,   KC_F9,KC_F10 , KC_F11,
      KC_TRNS , KC_1 ,  KC_2   ,  KC_3  ,   KC_4 ,   KC_5 ,         _______,     _______,        KC_CIRC,KC_AMPR,KC_ASTR, KC_PLUS,KC_PIPE, KC_F12,
      KC_TRNS ,_______,_______ ,_______ , _______,_______ ,         _______,     _______,        KC_LPRN,KC_RPRN,KC_MINS ,KC_LCBR,KC_RCBR, KC_GRV,
      KC_TRNS , UNDO ,  CUT    ,  COPY  ,  PASTE ,_______, KC_TRNS,KC_TRNS,     KC_TRNS, KC_TRNS,KC_LBRC,KC_RBRC, KC_EQL ,_______ ,KC_BSLS, KC_TRNS,
                                 KC_TRNS, KC_TRNS,KC_TRNS, KC_TRNS,KC_TRNS,     KC_TRNS       , KC_TRNS ,KC_TRNS,KC_TRNS, KC_TRNS,

      _______, _______, _______, _______,    _______,                            _______, _______, _______, _______,    _______
    ),


/*
 * Layer 3
 *
 * ,-------------------------------------------.      ,------.  ,------.      ,-------------------------------------------.
 * | TRNS   | TRNS | TRNS | TRNS | TRNS | TRNS |      |      |  |      |      | TRNS | TRNS | TRNS | TRNS | TRNS |  TRNS  |
 * |--------+------+------+------+------+------|      |------|  |------|      |------+------+------+------+------+--------|
 * | Reset  |      |      |      |      | Vol+ |      |      |  |      |      | Prev | Play | Next |      |      |  TRNS  |
 * |--------+------+------+------+------+------|      |------|  |------|      |------+------+------+------+------+--------|
 * | TRNS   | Hue+ | Sat+ |Brght+|RGB Tg| Vol- |      |      |  |      |      | Home |PgDown| PgUp | End  |      |  TRNS  |
 * |--------+------+------+------+------+------+------+------|  |------|------+------+------+------+------+------+--------|
 * | TRNS   | Hue- | Sat- |Brght-| RGB+ | Mute | TRNS | TRNS |  | TRNS | TRNS |ScrenS|Wndows| Lock |      |      |        |
 * `----------------------+------+------+------+------+------|  |------+------+------+------+------+----------------------'
 *                        | TRNS | TRNS | TRNS | TRNS | TRNS |  | TRNS | TRNS | TRNS |Switch| TRNS |
 *                        |      |      |      |      |      |  |      |      |      | User |      |
 *                        `----------------------------------'  `----------------------------------'
 *
 * ,----------------------------.      ,------.                 ,----------------------------.      ,------.
 * | Prev | Next | Pause | Stop |      | Mute |                 | Prev | Next | Pause | Stop |      | Mute |
 * `----------------------------'      `------'                 `----------------------------'      '------'
 */
    [_LAYER_3] = LAYOUT_myr(
      KC_TRNS ,KC_TRNS,KC_TRNS ,KC_TRNS ,KC_TRNS , KC_TRNS,         _______,     _______,        KC_TRNS,KC_TRNS,KC_TRNS, KC_TRNS,KC_TRNS, KC_TRNS,
      QK_BOOT ,_______,_______ ,_______ , _______, KC_VOLU,         _______,     _______,        KC_MPRV,KC_MPLY,KC_MNXT, _______,_______, KC_TRNS,
      KC_TRNS ,RGB_HUI,RGB_SAI ,RGB_VAI , RGB_TOG, KC_VOLD,         _______,     _______,        KC_HOME,KC_PGDN,KC_PGUP, KC_END ,_______, KC_TRNS,
      KC_TRNS ,RGB_HUD,RGB_SAD ,RGB_VAD , RGB_MOD,KC_MUTE, KC_TRNS,KC_TRNS,     KC_TRNS, KC_TRNS,SCREENS, WDOWS , LOCK  ,_______,_______,_______,
                                 KC_TRNS, KC_TRNS,KC_TRNS, KC_TRNS,KC_TRNS,     KC_TRNS       , KC_TRNS ,KC_TRNS,SWITCH , KC_TRNS,

      _______, _______, _______, _______,    _______,                            _______, _______, _______, _______,    _______
    ),


// /*
//  * Layer template - LAYOUT
//  *
//  * ,-------------------------------------------.      ,------.  ,------.      ,-------------------------------------------.
//  * |        |      |      |      |      |      |      |      |  |      |      |      |      |      |      |      |        |
//  * |--------+------+------+------+------+------|      |------|  |------|      |------+------+------+------+------+--------|
//  * |        |      |      |      |      |      |      |      |  |      |      |      |      |      |      |      |        |
//  * |--------+------+------+------+------+------|      |------|  |------|      |------+------+------+------+------+--------|
//  * |        |      |      |      |      |      |      |      |  |      |      |      |      |      |      |      |        |
//  * |--------+------+------+------+------+------+------+------|  |------|------+------+------+------+------+------+--------|
//  * |        |      |      |      |      |      |      |      |  |      |      |      |      |      |      |      |        |
//  * `----------------------+------+------+------+------+------|  |------+------+------+------+------+----------------------'
//  *                        |      |      |      |      |      |  |      |      |      |      |      |
//  *                        |      |      |      |      |      |  |      |      |      |      |      |
//  *                        `----------------------------------'  `----------------------------------'
//  */
//     [_LAYERINDEX] = LAYOUT(
//       _______, _______, _______, _______, _______, _______,          _______, _______,          _______, _______, _______, _______, _______, _______,
//       _______, _______, _______, _______, _______, _______,          _______, _______,          _______, _______, _______, _______, _______, _______,
//       _______, _______, _______, _______, _______, _______,          _______, _______,          _______, _______, _______, _______, _______, _______,
//       _______, _______, _______, _______, _______, _______, _______, _______, _______, _______, _______, _______, _______, _______, _______, _______,
//                                  _______, _______, _______, _______, _______, _______, _______, _______, _______, _______
//     ),

// /*
//  * Layer template - LAYOUT_myr
//  *
//  * ,-------------------------------------------.      ,------.  ,------.      ,-------------------------------------------.
//  * |        |      |      |      |      |      |      |      |  |      |      |      |      |      |      |      |        |
//  * |--------+------+------+------+------+------|      |------|  |------|      |------+------+------+------+------+--------|
//  * |        |      |      |      |      |      |      |      |  |      |      |      |      |      |      |      |        |
//  * |--------+------+------+------+------+------|      |------|  |------|      |------+------+------+------+------+--------|
//  * |        |      |      |      |      |      |      |      |  |      |      |      |      |      |      |      |        |
//  * |--------+------+------+------+------+------+------+------|  |------|------+------+------+------+------+------+--------|
//  * |        |      |      |      |      |      |      |      |  |      |      |      |      |      |      |      |        |
//  * `----------------------+------+------+------+------+------|  |------+------+------+------+------+----------------------'
//  *                        |      |      |      |      |      |  |      |      |      |      |      |
//  *                        |      |      |      |      |      |  |      |      |      |      |      |
//  *                        `----------------------------------'  `----------------------------------'
//  *
//  * ,-----------------------------.      ,------.                ,---------------------------.      ,------.
//  * |        |      |      |      |      |      |                |      |      |      |      |      |      |
//  * `-----------------------------'      `------'                `---------------------------'      '------'
//  */
//     [_LAYERINDEX] = LAYOUT_myr(
//       _______, _______, _______, _______, _______, _______,          _______, _______,          _______, _______, _______, _______, _______, _______,
//       _______, _______, _______, _______, _______, _______,          _______, _______,          _______, _______, _______, _______, _______, _______,
//       _______, _______, _______, _______, _______, _______,          _______, _______,          _______, _______, _______, _______, _______, _______,
//       _______, _______, _______, _______, _______, _______, _______, _______, _______, _______, _______, _______, _______, _______, _______, _______,
//                                  _______, _______, _______, _______, _______, _______, _______, _______, _______, _______,
//
//       _______, _______, _______, _______,          _______,                   _______, _______, _______, _______,          _______
//     ),
};

#ifdef ENCODER_ENABLE
bool encoder_update_kb(uint8_t index, bool clockwise) {
    if (!encoder_update_user(index, clockwise)) {
        return false;
    }
    // Myriad
    // Volume control
    if (clockwise) {
        tap_code(KC_VOLU);
    } else {
        tap_code(KC_VOLD);
    }
    return true;
}
#endif
